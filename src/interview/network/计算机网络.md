## 计算机网络

### 单点登录

- 三种实现方式：
  - `session`广播：也就是`session`复制，将一个微服务模块上已存储登录信息的`session`复制到所有其他分布式模块中，缺点是在集群模块很多时，复制过程将消耗极大的资源
  - `cookie + redis`：
    1. 在集群的任一模块中进行登录，之后，将数据放到两个地方：
       1. `redis`：`key`中存入随机生成的唯一值，`value`中存入用户数据，可以通过设置`redis`的过期时间来做到和`session`一样的效果
       2. `cookie`：把`redis`中生成的`key`存入`cookie`
    2. 访问集群中其他模块时，浏览器发送的请求会携带`cookie`信息
    3. 服务器得到请求后，会获取`cookie`值，并
       - 把`cookie`中获取到的值拿到`redis`中进行查询，通过是否能够查询到数据判断当前是否是登录
  - `token`：
    1. 在集群的任一模块中进行登录，登录后，按照规则生成字符串，再将登录后的用户信息包含到字符串中，进行一些编码加密的工作
    2. 将字符串返回（通过`cookie`或通过地址栏）
    3. 再去访问其他模块时，每次访问都会在地址栏带上生成的字符串，在访问模块中获取地址栏中的字符串，将字符串解码获取里面的用户信息
       - 通过是否能在字符串中获取到用户信息判断当前是否是登录

### `JWT(Json Web Token)`

- `token`是按照一定规则生成的字符串，但是规则是自定义的，而`JWT`是一种通用的规则
- `encode`：比如`asjri4bc82hr.sa1b2dfekjYe9D.qm34rp76it`，由两个`.`划分成了三个部分
  - 第一部分：`JWT`头信息，是一个描述`JWT`元数据的`JSON`对象
  - 第二部分：有效载荷，包含了主体信息（用户信息）
  - 第三部分：签名哈希，对上面两部分数据签名，确保数据不会被更改

### `cookie`与`session`

- `session`：
  - 默认过期时间为`30`分钟